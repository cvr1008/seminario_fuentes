group_by(RegionCode, grupo) %>%   # Agrupa por RegionCode y grupo
summarise(mean_value = mean(Value, na.rm = TRUE))%>%
filter(RegionCode %in% lista_codigos_paises)  # Calcula la media en cada grupo y desagrupa
otra$mean_value[is.nan(otra$mean_value)] <- 0
media_region <- otra %>%
group_by(RegionCode) %>%
summarise(mean_value_region = mean(mean_value, na.rm = TRUE))
summary(media_ganaderia)
summary(otra)
full_join(x=media_ganaderia,y=otra, by=c('Codigo'='RegionCode'))
union<-full_join(x=media_ganaderia,y=otra, by=c('Codigo'='RegionCode'))
View(union)
c<-factor(otra$grupo)
c
c<-factor(levels(otra$grupo))
c
table(c)
levels(otra$grupo)
table(factor(otra$grupo))
table(factor(media_ganaderia$zoonosis_name))
l<-otra %>% mutate(grupo = recode(grupo, "Ent" = "Enterococcus", "Esc" = "Escherichia")
l
otra %>%
filter(data=.,grupo %in% c("Ent", "Esc"))
otra %>%
filter(.data=.,grupo %in% c("Ent", "Esc"))
otra %>%
otra %>%
filter(.data=.,grupo %in% c("Ent", "Esc"))%>%
mutate(.data=.,grupo = recode(grupo, "Ent" = "Enterococcus", "Esc" = "Escherichia")
otra %>%
library(dplyr)
otra %>%
filter(grupo %in% c("Ent", "Esc")) %>%
mutate(grupo = recode(grupo, "Ent" = "Enterococcus", "Esc" = "Escherichia"))
media_nueva<-otra %>%
filter(grupo %in% c("Ent", "Esc")) %>%
mutate(grupo = recode(grupo, "Ent" = "Enterococcus", "Esc" = "Escherichia"))
View(media_nueva)
media_ganaderia_nueva<-media_ganaderia %>%
filter(grupo %in% c("Enterococcus", "Escherichia"))
media_ganaderia_nueva<-media_ganaderia %>%
filter(zoonosis_name %in% c("Enterococcus", "Escherichia"))
View(media_ganaderia_nueva)
union<-full_join(x=media_ganaderia,y=otra, by=c('Codigo'='RegionCode','grupo'='zoonosis_name'))
union
View(union)
union<-full_join(x=media_ganaderia_nueva,y=media_nueva, by=c('Codigo'='RegionCode','grupo'='zoonosis_name'))
union
View(union)
View(media_nueva)
union<-full_join(x=media_ganaderia_nueva,y=media_nueva, by=c('Codigo'='RegionCode','grupo'='zoonosis_name'))
summary(media_ganaderia_nueva)
summary(media_nueva)
union<-right_join(x=media_ganaderia_nueva,y=media_nueva, by=c('Codigo'='RegionCode','grupo'='zoonosis_name'))
union
str(media_ganaderia_nueva)
table(factor(media_nueva$grupo))
table(factor(media_ganaderia_nueva$zoonosis_name))
View(media_ganaderia)
media_ganaderia_nueva<-media_ganaderia %>%
filter(zoonosis_name %in% c("Enterococcus,", "Escherichia"))
table(factor(media_ganaderia_nueva$zoonosis_name))
union<-right_join(x=media_ganaderia_nueva,y=media_nueva, by=c('Codigo'='RegionCode','grupo'='zoonosis_name'))
union
summary(media_ganaderia_nueva)
summary(media_nueva)
tabla_unida <- full_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")
)
View(tabla_unida)
library(ggplot)
str(tabla_unida)
ggplot(tabla_unida, aes(x = zoonosis_name)) +
geom_bar(aes(y = media, fill = "Media"), stat = "identity", position = "dodge") +
geom_bar(aes(y = mean_value, fill = "Mean Value"), stat = "identity", position = "dodge") +
labs(x = "Zoonosis Name", y = "Values", fill = "Legend",
title = "Comparación de Media y Mean Value por Zoonosis") +
theme_minimal()
media_ganaderia_nueva<-media_ganaderia %>%
media_ganaderia_nueva<-media_ganaderia %>%
media_ganaderia_nueva<-media_ganaderia %>%
filter(zoonosis_name %in% c("Enterococcus,", "Escherichia")) %>%
mutate(grupo = recode(grupo, "Enterococcus," = "Enterococcus"))
tabla_unida <- full_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")
)
ggplot(tabla_unida, aes(x = zoonosis_name)) +
geom_bar(aes(y = media, fill = "Media"), stat = "identity", position = "dodge") +
geom_bar(aes(y = mean_value, fill = "Mean Value"), stat = "identity", position = "dodge") +
labs(x = "Zoonosis Name", y = "Values", fill = "Legend",
title = "Comparación de Media y Mean Value por Zoonosis") +
theme_minimal()
media_ganaderia_nueva<-media_ganaderia %>%
filter(zoonosis_name %in% c("Enterococcus,", "Escherichia")) %>%
mutate(grupo = recode(grupo, "Enterococcus," = "Enterococcus"))
media_ganaderia_nueva<-media_ganaderia %>%
filter(zoonosis_name %in% c("Enterococcus,", "Escherichia")) %>%
mutate(zoonosis_name = recode(grupo, "Enterococcus," = "Enterococcus"))
media_ganaderia_nueva<-media_ganaderia %>%
filter(zoonosis_name %in% c("Enterococcus,", "Escherichia")) %>%
mutate(zoonosis_name = recode(zoonosis_name, "Enterococcus," = "Enterococcus"))
tabla_unida <- full_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")
)
ggplot(tabla_unida, aes(x = zoonosis_name)) +
geom_bar(aes(y = media, fill = "Media"), stat = "identity", position = "dodge") +
geom_bar(aes(y = mean_value, fill = "Mean Value"), stat = "identity", position = "dodge") +
labs(x = "Zoonosis Name", y = "Values", fill = "Legend",
title = "Comparación de Media y Mean Value por Zoonosis") +
theme_minimal()
# Crear el gráfico de barras agrupadas
ggplot(tabla_unida, aes(x = zoonosis_name, fill = Codigo)) +
geom_bar(aes(y = media, color = "Media"), stat = "identity", position = "dodge") +
geom_bar(aes(y = mean_value, color = "Mean Value"), stat = "identity", position = "dodge") +
labs(x = "Bacteria (Zoonosis)",
y = "Valores de Medias",
fill = "País (Codigo)",
color = "Tipo de Media",
title = "Medias de Cada Bacteria por País") +
theme_minimal() +
scale_color_manual(values = c("Media" = "blue", "Mean Value" = "red")) +
scale_fill_brewer(palette = "Set2")
# Crear gráfico de barras agrupadas más claro
ggplot(tabla_unida, aes(x = zoonosis_name, fill = Codigo)) +
geom_bar(aes(y = media), stat = "identity", position = position_dodge(width = 0.7), alpha = 0.7) +
geom_bar(aes(y = mean_value), stat = "identity", position = position_dodge(width = 0.7)) +
labs(
x = "Bacteria (Zoonosis)",
y = "Valores de Medias",
fill = "País (Codigo)",
title = "Medias de Cada Bacteria por País"
) +
scale_fill_brewer(palette = "Set2") +  # Paleta de colores para los países
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotar etiquetas para mayor claridad
# Crear gráfico de barras agrupadas más claro
ggplot(tabla_unida, aes(x = zoonosis_name, y = media, color = Codigo)) +
geom_point(size = 4, alpha = 0.7) +
geom_point(aes(y = mean_value), shape = 17, size = 4, alpha = 0.7) +
labs(
x = "Bacteria (Zoonosis)",
y = "Valores de Medias",
color = "País (Codigo)",
title = "Medias de Cada Bacteria por País (Dotplot)"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(tabla_unida, aes(x = zoonosis_name, group = Codigo, color = Codigo)) +
geom_line(aes(y = media), size = 1) +
geom_point(aes(y = media), size = 3, shape = 16) +
geom_line(aes(y = mean_value), linetype = "dashed", size = 1) +
geom_point(aes(y = mean_value), size = 3, shape = 1) +
labs(
x = "Bacteria (Zoonosis)",
y = "Valores de Medias",
color = "País (Codigo)",
title = "Comparación de Medias de Cada Bacteria por País"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(tabla_unida, aes(x = zoonosis_name, y = media, fill = Codigo)) +
geom_bar(stat = "identity", position = "dodge") +
facet_wrap(~Codigo) +
labs(
x = "Bacteria (Zoonosis)",
y = "Valores de Media",
fill = "País (Codigo)",
title = "Desglose de Medias por País"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(tabla_unida, aes(x = zoonosis_name)) +
geom_boxplot(aes(y = media, fill = "Media"), alpha = 0.5) +
geom_boxplot(aes(y = mean_value, fill = "Mean Value"), alpha = 0.5) +
labs(x = "Zoonosis Name", y = "Values", fill = "Legend",
title = "Distribución de Media y Mean Value por Zoonosis") +
theme_minimal()
ggplot(tabla_unida, aes(x = Codigo)) +
geom_line(aes(y = media, color = "Media"), size = 1) +
geom_line(aes(y = mean_value, color = "Mean Value"), size = 1, linetype = "dashed") +
labs(x = "Codigo", y = "Values", color = "Legend",
title = "Tendencia de Media y Mean Value por Codigo") +
theme_minimal()
ggplot(tabla_unida, aes(x = media, y = mean_value)) +
geom_point(aes(color = zoonosis_name), size = 3) +
labs(x = "Media", y = "Mean Value", color = "Zoonosis Name",
title = "Relación entre Media y Mean Value") +
theme_minimal()
ggplot(tabla_unida, aes(x = zoonosis_name)) +
geom_bar(aes(y = media, fill = "Media"), stat = "identity", position = "dodge") +
geom_bar(aes(y = mean_value, fill = "Mean Value"), stat = "identity", position = "dodge") +
labs(x = "Zoonosis Name", y = "Values", fill = "Legend",
title = "Comparación de Media y Mean Value por Zoonosis") +
theme_minimal()
load("C:/Users/deyan/fuentes/seminario_fuentes/OUTPUT/enviroment.RData")
# Calcular la media basada en la proporción de positivos
media_ganaderia <- paises_UE_df %>%
group_by(Codigo, zoonosis_name) %>%
summarise(
media = mean((MuestraPositiva / TotalMuestras)*100, na.rm = TRUE)
) %>%
ungroup()
media_ganaderia$media[is.nan(media_ganaderia$media)] <- 0
library(dplyr)
# Calcular la media basada en la proporción de positivos
media_ganaderia <- paises_UE_df %>%
group_by(Codigo, zoonosis_name) %>%
summarise(
media = mean((MuestraPositiva / TotalMuestras)*100, na.rm = TRUE)
) %>%
ungroup()
media_ganaderia$media[is.nan(media_ganaderia$media)] <- 0
lista_codigos_paises <- list("AT", "BE", "BG", "CY", "CZ", "DE", "DK", "EE", "EL", "ES", "FI", "FR", "HR", "HU",
"IE", "IT", "LT", "LU", "LV", "MT", "NL", "PL", "PT", "RO", "SE", "SI", "SK")
otra <- otra %>%
dplyr::filter(RegionCode %in% lista_codigos_paises)
#Filtro solo las bacterias comunes y les cambio el nombre de las bacterias comunes
media_nueva<-otra %>%
filter(grupo %in% c("Ent", "Esc")) %>%
mutate(grupo = recode(grupo, "Ent" = "Enterococcus", "Esc" = "Escherichia"))
#Filtro las bacterias comunes
media_ganaderia_nueva<-media_ganaderia %>%
filter(zoonosis_name %in% c("Enterococcus,", "Escherichia")) %>%
mutate(zoonosis_name = recode(zoonosis_name, "Enterococcus," = "Enterococcus"))
#Hago un join usando de union el codigo y las bacterias comunes
tabla_unida <- full_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")
)
View(tabla_unida)
View(media_nueva)
View(otra)
View(media_ganaderia_nueva)
#Hago un join usando de union el codigo y las bacterias comunes
tabla_unida <- full_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo") %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value)
)
#Hago un join usando de union el codigo y las bacterias comunes
tabla_unida <- full_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")
) %>% rename(mediaGanaderia=media, mediaEnPoblacion=mean_value)
#Hago un join usando de union el codigo y las bacterias comunes
tabla_unida <- left_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")
) %>% rename(mediaGanaderia=media, mediaEnPoblacion=mean_value)
#Hago un join usando de union el codigo y las bacterias comunes
tabla_unida <- full_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")
) %>% rename(mediaGanaderia=media, mediaEnPoblacion=mean_value)
#Hago un join usando de union el codigo y las bacterias comunes
tabla_unida <- full_join(
#Hago un join usando de union el codigo y las bacterias comunes
tabla_unida <- full_join(
media_ganaderia_nueva,
media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")
) %>% rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion))
#Hago un join usando de union el codigo y las bacterias comunes
tabla_unida <- full_join(
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion))
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion))
#Hago un join usando de union el codigo y las bacterias comunes
library(tidyr)
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion))
factor(tabla_unida$Variable)
factor(levels(tabla_unida$Variable))
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion)) %>%
mutate(Variable = factor(Variable, levels = c("Escherichia","Enterococcus")))
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion))
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion)) %>%
mutate(zoonosis_name = factor(zoonosis_name, levels = c("Escherichia","Enterococcus")))
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion)) %>%
mutate(zoonosis_name = factor(zoonosis_name, levels = c("Escherichia","Enterococcus"))) %>%
mutate(Variable = factor(Variable, levels = c("mediaGanaderia","mediaEnPoblacion")))
ggplot(data = tabla_unida, aes(x = Codigo, y = zoonosis_name)) +
geom_point(aes(colour = factor(Variable), shape = zoonosis_name))
library(ggplot2)
ggplot(data = tabla_unida, aes(x = Codigo, y = zoonosis_name)) +
geom_point(aes(colour = factor(Variable), shape = zoonosis_name))
ggplot(data = tabla_unida, aes(x = zoonosis_name, y = Codigo)) +
geom_point(aes(colour = factor(Variable), shape = zoonosis_name))
ggplot(data = tabla_unida, aes(x = Valores, y = zoonosis_name)) +
geom_point(aes(colour = factor(Variable), shape = zoonosis_name))
ggplot(data = tabla_unida, aes(x = zoonosis_name, y = Valores)) +
geom_point(aes(colour = factor(Variable), shape = zoonosis_name))
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_point(aes(colour = factor(Variable), shape = zoonosis_name))
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_point(aes(colour = factor(Variable), shape = zoonosis_name))
# ** Gráfico de barras ----------------------------------------------------
data("diamonds")
# coord_polar
ggplot(data = diamonds) +
geom_bar(
mapping = aes(x = cut, fill = cut),
show.legend = FALSE,
width = 1
) +
theme(aspect.ratio = 1) +
labs(x = NULL, y = NULL) +
coord_polar()
# Manipulando color y forma dentro de los puntos --> no muy útil
ggplot(data = mpg, aes(x = displ, y = hwy)) +
geom_point(aes(colour = factor(cyl), shape = drv))
# como la variable `drv` tiene solo 3 niveles, podemos dividir el gráfico de acorde a ellas
ggplot(data = mpg, aes(x = displ, y = hwy)) +
geom_point(aes(colour = factor(cyl))) +
facet_wrap(facets = vars(drv), nrow = 1)
View(diamonds)
geom_point(aes(colour = factor(Variable))+
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_point(aes(colour = factor(Variable)))+
facet_wrap(facets = vars(zoonosis_name), nrow = 1)
library(ggplot2)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_point(aes(colour = factor(Variable)))+
facet_wrap(facets = vars(zoonosis_name), nrow = 1)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)
View(media_ganaderia)
View(paises_UE_df)
# Modificando el colour --> no es lo que esperas!
ggplot(data = diamonds, aes(x = cut)) +
geom_bar(aes(colour = clarity))#un color para cada nivel, pero el fondo  no influye
# Modificando el "relleno" de las cajas
ggplot(data = diamonds, aes(x = cut)) +
geom_bar(aes(fill = clarity), colour = "black")#fill Define que las barras se rellenarán según la variable clarity
# Manipulando color y forma dentro de los puntos --> no muy útil
ggplot(data = mpg, aes(x = displ, y = hwy)) +
geom_point(aes(colour = factor(cyl), shape = drv))
# Para hacer comparaciones entre niveles del eje X considerando la tercera variable
ggplot(data = diamonds, aes(x = cut)) +
geom_bar(aes(fill = clarity), position = "dodge")#position='dodge'-->ajusta la posición de las barras para que se alineen una al lado de la otra (en lugar de apilarse) dentro de cada nivel de cut
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar()
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill=zoonosis_name,position='Codigo'))+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill=zoonosis_name),position='Codigo')+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill=zoonosis_name),position='dodge')+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position='dodge')
rlang::last_trace()
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position="dodge")
summary(tabla_unida)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion)) %>%
mutate(zoonosis_name = factor(zoonosis_name, levels = c("Escherichia","Enterococcus"))) %>%
mutate(Variable = factor(Variable, levels = c("mediaGanaderia","mediaEnPoblacion"))) %>%
drop.na()
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion)) %>%
mutate(zoonosis_name = factor(zoonosis_name, levels = c("Escherichia","Enterococcus"))) %>%
mutate(Variable = factor(Variable, levels = c("mediaGanaderia","mediaEnPoblacion"))) %>%
drop_na()
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position="dodge")+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)+
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)+
facet_wrap(facets = vars(Codigo))
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position="dodge")+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)+
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
#facet_wrap(facets = vars(Variable), nrow = 1)+
facet_grid(rows = vars(Variable), cols = vars(Codigo))
tabla_unida$faceta_combinada <- paste(tabla_unida$Variable, tabla_unida$Codigo, sep = "_")
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(faceta_combinada), nrow = 1)
# Guardamos esta tabla en un objeto para el siguiente punto
Wide_Starwars <-
starwars %>%
group_by(homeworld) %>%
filter(n() > 1) %>%
summarise(across(where(is.numeric), ~ mean(.x, na.rm = TRUE))) %>%
arrange(desc(birth_year)) %>%
drop_na()
# como la variable `drv` tiene solo 3 niveles, podemos dividir el gráfico de acorde a ellas
ggplot(data = mpg, aes(x = displ, y = hwy)) +
geom_point(aes(colour = factor(cyl))) +
facet_wrap(facets = vars(drv), nrow = 1)
# Podemos tener 5 variables en un gráfico!
ggplot(data = mpg, aes(x = displ, y = hwy)) +
geom_point(aes(colour = factor(cyl))) +
#facet_wrap(class ~ drv)
facet_grid(class ~ drv, scales = "free", margins = TRUE) # Muestra la grilla con toda la combinación
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position="dodge")+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)+
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
#facet_wrap(facets = vars(Variable), nrow = 1)+
facet_grid(rows = vars(Variable), cols = vars(Codigo))
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position="dodge")+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)+
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position="dodge")+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)+
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)
library(ggplot2)
tabla_unida <- full_join(x=media_ganaderia_nueva, y= media_nueva,
by = c("Codigo" = "RegionCode", "zoonosis_name" = "grupo")) %>%
rename(mediaGanaderia=media, mediaEnPoblacion=mean_value) %>%
pivot_longer(.,names_to = "Variable", values_to = "Valores", cols = c(mediaGanaderia:mediaEnPoblacion)) %>%
mutate(zoonosis_name = factor(zoonosis_name, levels = c("Escherichia","Enterococcus"))) %>%
mutate(Variable = factor(Variable, levels = c("mediaGanaderia","mediaEnPoblacion"))) %>%
drop_na()
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position="dodge")+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)+
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill=zoonosis_name),position="dodge")+
#geom_point(aes(colour = factor(zoonosis_name)))+
facet_wrap(facets = vars(Variable), nrow = 1)+
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(zoonosis_name), nrow = 1)
ggplot(data = tabla_unida, aes(x = Codigo, y = Valores)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)
ggplot(data = tabla_unida, aes(x = Valores, y = Codigo)) +
geom_bar(aes(fill = zoonosis_name), position = "dodge", stat = "identity") +
facet_wrap(facets = vars(Variable), nrow = 1)
