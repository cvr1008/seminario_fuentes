library(rjson)
library(tidyjson)
library(dplyr)
# teniendo el archivo DDD este no es necesario, no sirve
consumo_J01 <- fromJSON(file = "INPUT/DATA/consumo_ATC_J01_sectorHospitalario_vs_sectorComunitario_2022.JSON")
consumo_J01
View(consumo_J01)
head(consumo_J01)
spread_all(consumo_J01) %>% View()
library(tidyverse)
library(rjson)
library(dplyr)
library(tidyr)
library(ggplot2)
DDD_Europa_Json <- fromJSON(file = "INPUT/DATA/DDD_1000_habitantes_paises..JSON")
DDD_Europa_Json
View(DDD_Europa_Json)
# --------------------
DDD_Europa_df <- do.call(rbind, lapply(DDD_Europa_Json, function(x) {
data.frame(Country = x$Country,
DDD_per_1000_inhabitants_per_day = as.numeric(x$`DDD per 1000 inhabitants per day`))
}))
# Verificar la estructura del nuevo dataframe
str(DDD_Europa_df)
# Mostrar las primeras filas del dataframe
head(DDD_Europa_df)
View(DDD_Europa_df)
grafico_DDD <- ggplot(DDD_Europa_df, aes(x = reorder(Country, -DDD_per_1000_inhabitants_per_day),
y = DDD_per_1000_inhabitants_per_day)) +
geom_bar(stat = "identity", fill = "turquoise") +
labs(title = "DDD por 1000 habitantes por día en Europa",
x = "País",
y = "DDD por 1000 habitantes por día") +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
grafico_DDD
library(readr)
library(dplyr)
library(ggplot2)
#--------------------------------
# "INPUT/DATA/datos_pib.tsv"
pibPP <- read_table("INPUT/DATA/datos_pib.tsv")
View(pibPP)
# Cambio de nombre columna
colnames(pibPP)[1] <- "pais"
# Nos quedamos con las últimas letras
pibPP$pais <- substr(pibPP$pais, nchar(pibPP$pais) - 1, nchar(pibPP$pais))
View(pibPP)
lista_pais <- list("BE", "BG", "CZ", "DK", "DE", "EE", "IE", "EL", "ES", "FR", "HR", "IT", "CY", "LV", "LT", "LU", "HU", "MT", "NL",
"AT", "PL", "PT", "RO", "SI", "SK", "FI", "SE")
pib <- pibPP %>% filter(pais %in% unlist(lista_pais))
View(pib)
pib <- pib[, colSums(is.na(pib)) < nrow(pib)]
pib
pib_2023 <- pib %>% select(pais, `2023`)
View(pib_2023)
pib_2023_desc <- pib_2023 %>% arrange(desc(`2023`))
pib_2023_desc <- pib_2023_desc %>%
mutate(pais = case_when(
pais == "SK" ~ "Eslovaquia",
pais == "SI" ~ "Slovenia",
pais == "EE" ~ "Estonia",
pais == "MT" ~ "Malta",
pais == "LV" ~ "Latvia",
pais == "HR" ~ "Croatia",
pais == "EL" ~ "Greece",
pais == "BG" ~ "Bulgaria",
TRUE ~ pais # Mantiene los nombres que no están en la lista
))
# Crear el gráfico de barras
grafico_pib <- ggplot(pib_2023_desc, aes(x = reorder(pais, -`2023`), y = `2023`)) +
geom_bar(stat = "identity", fill = "gold") +
labs(x = "País", y = "Valor en 2023", title = "PIB por País en 2023") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) # Rotar etiquetas para mejor legibilidad
grafico_pib
library(readr)
library(dplyr)
library(ggplot2)
tipo_ccaa_consumo_o_no <- read_delim("INPUT/DATA/datos_ccaa/tipo_ccaa_consumo_o_no.csv",
delim = ";", escape_double = FALSE, trim_ws = TRUE)
View(tipo_ccaa_consumo_o_no)
typeof(tipo_ccaa_consumo_o_no)
class(tipo_ccaa_consumo_o_no)
antibioticos <- tipo_ccaa_consumo_o_no %>%
filter(`Tipo de medicamento` == "Antibióticos")
antibioticos <- tipo_ccaa_consumo_o_no[tipo_ccaa_consumo_o_no$`Tipo de medicamento` == "Antibióticos" & tipo_ccaa_consumo_o_no$`Sexo` == "Ambos sexos",]
antibioticos
View(antibioticos)
antibioticos_si <- antibioticos[antibioticos$`Sí o no` == "Sí",]
antibioticos_si
View(antibioticos_si)
antibioticos_si$Total <- gsub(",", ".", antibioticos_si$Total)
# Limpia espacios y caracteres no numéricos (si es necesario)
antibioticos_si$Total <- gsub(" ", "", antibioticos_si$Total)
# Convierte a numérico
antibioticos_si$Total <- as.numeric(antibioticos_si$Total)
# Revisa si hay NA después de la conversión
sum(is.na(antibioticos_si$Total))  # Muestra el número de NAs
consumo_comunidades <- antibioticos_si %>%
group_by(`Comunidades y Ciudades Autónomas`) %>%
summarise(Total_Consumo = sum(as.numeric(Total), na.rm = TRUE)) %>%
arrange(desc(Total_Consumo))
consumo_comunidades
c_c_final <- consumo_comunidades %>%
mutate(`Comunidades y Ciudades Autónomas` = ifelse(is.na(`Comunidades y Ciudades Autónomas`), "Total País", `Comunidades y Ciudades Autónomas`))
c_c_final
consumo_comunidades <- antibioticos_si %>%
group_by(`Comunidades y Ciudades Autónomas`) %>%
summarise(Total_Consumo = sum(as.numeric(Total), na.rm = TRUE)) %>%
arrange(desc(Total_Consumo))
consumo_comunidades
c_c_final <- consumo_comunidades %>%
mutate(`Comunidades y Ciudades Autónomas` = ifelse(is.na(`Comunidades y Ciudades Autónomas`), "Total País", `Comunidades y Ciudades Autónomas`))
c_c_final
# Crear el gráfico de barras
ggplot(c_c_final, aes(x = reorder(`Comunidades y Ciudades Autónomas`, -Total_Consumo), y = Total_Consumo)) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(x = "Comunidades Autónomas", y = "Total Consumo", title = "Consumo de antibióticos por Comunidad Autónoma") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
antibioticos_si$Total <- gsub(",", ".", antibioticos_si$Total)
# Limpia espacios y caracteres no numéricos (si es necesario)
antibioticos_si$Total <- gsub(" ", "", antibioticos_si$Total)
# Convierte a numérico
antibioticos_si$Total <- as.numeric(antibioticos_si$Total)
# Revisa si hay NA después de la conversión
sum(is.na(antibioticos_si$Total))  # Muestra el número de NAs
consumo_comunidades <- antibioticos_si %>%
group_by(`Comunidades y Ciudades Autónomas`) %>%
summarise(Total_Consumo = sum(as.numeric(Total), na.rm = TRUE)) %>%
arrange(desc(Total_Consumo))
consumo_comunidades
c_c_final <- consumo_comunidades %>%
mutate(`Comunidades y Ciudades Autónomas` = ifelse(is.na(`Comunidades y Ciudades Autónomas`), "Total País", `Comunidades y Ciudades Autónomas`))
c_c_final
# Crear el gráfico de barras
ggplot(c_c_final, aes(x = reorder(`Comunidades y Ciudades Autónomas`, -Total_Consumo), y = Total_Consumo)) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(x = "Comunidades Autónomas", y = "Total Consumo", title = "Consumo de antibióticos por Comunidad Autónoma") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
library(readr)
library(dplyr)
library(ggplot2)
tipo_ccaa_consumo_o_no <- read_delim("INPUT/DATA/datos_ccaa/tipo_ccaa_consumo_o_no.csv",
delim = ";", escape_double = FALSE, trim_ws = TRUE)
View(tipo_ccaa_consumo_o_no)
typeof(tipo_ccaa_consumo_o_no)
class(tipo_ccaa_consumo_o_no)
antibioticos <- tipo_ccaa_consumo_o_no %>%
filter(`Tipo de medicamento` == "Antibióticos")
antibioticos <- tipo_ccaa_consumo_o_no[tipo_ccaa_consumo_o_no$`Tipo de medicamento` == "Antibióticos" & tipo_ccaa_consumo_o_no$`Sexo` == "Ambos sexos",]
antibioticos
View(antibioticos)
antibioticos_si <- antibioticos[antibioticos$`Sí o no` == "Sí",]
antibioticos_si
View(antibioticos_si)
antibioticos_si$Total <- gsub(",", ".", antibioticos_si$Total)
# Limpia espacios y caracteres no numéricos (si es necesario)
antibioticos_si$Total <- gsub(" ", "", antibioticos_si$Total)
# Convierte a numérico
antibioticos_si$Total <- as.numeric(antibioticos_si$Total)
# Revisa si hay NA después de la conversión
sum(is.na(antibioticos_si$Total))  # Muestra el número de NAs
consumo_comunidades <- antibioticos_si %>%
group_by(`Comunidades y Ciudades Autónomas`) %>%
summarise(Total_Consumo = sum(as.numeric(Total), na.rm = TRUE)) %>%
arrange(desc(Total_Consumo))
consumo_comunidades
c_c_final <- consumo_comunidades %>%
mutate(`Comunidades y Ciudades Autónomas` = ifelse(is.na(`Comunidades y Ciudades Autónomas`), "Total País", `Comunidades y Ciudades Autónomas`))
consumo_comunidades
consumo_comunidades <- antibioticos_si %>%
group_by(`Comunidades y Ciudades Autónomas`) %>%
#summarise(Total_Consumo = sum(as.numeric(Total), na.rm = TRUE)) %>%
arrange(desc(Total))
consumo_comunidades
c_c_final <- consumo_comunidades %>%
mutate(`Comunidades y Ciudades Autónomas` = ifelse(is.na(`Comunidades y Ciudades Autónomas`), "Total País", `Comunidades y Ciudades Autónomas`))
c_c_final
# Crear el gráfico de barras
ggplot(c_c_final, aes(x = reorder(`Comunidades y Ciudades Autónomas`, -Total_Consumo), y = Total_Consumo)) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(x = "Comunidades Autónomas", y = "Total Consumo", title = "Consumo de antibióticos por Comunidad Autónoma") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
# Crear el gráfico de barras
ggplot(c_c_final, aes(x = reorder(`Comunidades y Ciudades Autónomas`, -Total), y = Total)) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(x = "Comunidades Autónomas", y = "Total Consumo", title = "Consumo de antibióticos por Comunidad Autónoma") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
library(pxR)
library(readr)
library(dplyr)
library(ggplot2)
library(RColorBrewer)
# Leer el archivo .px
archivo_px <- read.px("C:/Users/usuario/seminario_fuentes/INPUT/DATA/datos_ccaa/tipo_ccaa_recetado_o_no.px")
df_px <- as.data.frame(archivo_px)
# Ver las primeras filas
head(df_px)
View(df_px)
# quedarme solo con los antibióticos
antibioticos <- df_px[df_px[["Tipo.de.medicamento"]] == "Antibióticos" & df_px$`Sexo` == "Ambos sexos", ]
antibioticos
View(antibioticos)
# qué comunidad autónoma se automedica más
antibioticos_sin_receta <- antibioticos[antibioticos$`Recetado` == "No recetado",]
antibioticos_sin_receta
View(antibioticos_sin_receta)
antibioticos_sin_receta <- antibioticos_sin_receta %>%
filter(value != 0)
consumo_comunidades <- antibioticos_sin_receta %>%
group_by(`Comunidad.autónoma`) %>%
#summarise(Total_Consumo = sum(as.numeric(value), na.rm = TRUE)) %>%
arrange(desc(value))
consumo_comunidades
View(consumo_comunidades)
ggplot(consumo_comunidades, aes(x = "", y = value, fill = `Comunidad.autónoma`)) +
geom_bar(stat = "identity", width = 1) +
coord_polar(theta = "y") +
labs(title = "Consumo de Antibióticos por Comunidad Autónoma",
fill = "Comunidad Autónoma") +
theme_void()  # Elimina el fondo y los ejes
View(df_px)
View(antibioticos)
consumo_comunidades <- antibioticos_sin_receta %>%
group_by(`Comunidad.autónoma`) %>%
#summarise(Total_Consumo = sum(as.numeric(value), na.rm = TRUE)) %>%
arrange(desc(value))
consumo_comunidades
View(consumo_comunidades)
<<<<<<< HEAD
library(tidyverse)
library(rjson)
library(tidyjson)
library(dplyr)
# teniendo el archivo DDD este no es necesario, no sirve
consumo_J01 <- fromJSON(file = "INPUT/DATA/consumo_ATC_J01_sectorHospitalario_vs_sectorComunitario_2022.JSON")
consumo_J01
View(consumo_J01)
library(readr)
library(dplyr)
AMR_2023_Interactive_dashboard_1 <- read_csv("C:/Users/usuario/seminario_fuentes/INPUT/DATA/AMR - 2023 Interactive dashboard_1.txt")
View(AMR_2023_Interactive_dashboard_1)
library(pxR)
library(readr)
library(dplyr)
library(ggplot2)
library(RColorBrewer)
# Leer el archivo .px
archivo_px <- read.px("C:/Users/usuario/seminario_fuentes/INPUT/DATA/datos_ccaa/tipo_ccaa_recetado_o_no.px")
df_px <- as.data.frame(archivo_px)
# Ver las primeras filas
head(df_px)
View(df_px)
archivo_px
View(archivo_px)
View(archivo_px)
View(df_px)
library(pxR)
library(readr)
library(dplyr)
library(ggplot2)
library(RColorBrewer)
# Leer el archivo .px
archivo_px <- read.px("C:/Users/usuario/seminario_fuentes/INPUT/DATA/datos_ccaa/tipo_ccaa_recetado_o_no.px")
View(archivo_px)
df_px <- as.data.frame(archivo_px)
# Ver las primeras filas
head(df_px)
View(df_px)
# quedarme solo con los antibióticos
antibiotic <- df_px[df_px[["Tipo.de.medicamento"]] == "Antibióticos" & df_px$`Sexo` == "Ambos sexos", ]
antibiotic
View(antibiotic)
# qué comunidad autónoma se automedica más
antibioticos_sin_receta <- antibiotic[antibiotic$`Recetado` == "No recetado",]
antibioticos_sin_receta
View(antibioticos_sin_receta)
=======
>>>>>>> fa619679b8b0ef222d841f7208f5a598d7b5fec3
>>>>>>> 892ebe1913be2e7c869ada4acfde37f1424ca08a
library(readr)
Incidencia_enfermedades <- read_delim("INPUT/DATA/ECDC_encuesta_AMR_incidencia_enfermedades.csv",
delim = ",", escape_double = FALSE, trim_ws = TRUE)
Incidencia_enfermedades
summary(Incidencia_enfermedades)
View(Incidencia_enfermedades)
incidencia_2022 <- Incidencia_enfermedades %>%
filter(Time == 2022)
library(dplyr)
incidencia_2022 <- Incidencia_enfermedades %>%
filter(Time == 2022)
View(incidencia_2022)
incidencia_2022M <- Incidencia_enfermedades %>%
filter(Time == 2022) %>%
filter(Category == 'Male' || Category == 'Female')
incidencia_2022M
rlang::last_trace()
incidencia_2022M <- Incidencia_enfermedades %>%
filter(Time == 2022 && (Category == 'Male' || Category == 'Female'))
incidencia_2022MF <- incidencia_2022 %>%
filter(Category == 'Male' || Category == 'Female')
incidencia_2022 <- Incidencia_enfermedades %>%
filter(Time == 2022) %>%
incidencia_2022MF <- incidencia_2022 %>%
filter(Category == 'Male' | Category == 'Female')
incidencia_2022 <- Incidencia_enfermedades %>%
filter(Time == 2022)
incidencia_2022MF <- incidencia_2022 %>%
filter(Category == 'Male' | Category == 'Female')
View(incidencia_2022MF)
incidencia_2022MF$Valor <- as.numeric(incidencia_2022MF$Value)
View(incidencia_2022MF)
incidencia_2022MF$Value <- as.numeric(incidencia_2022MF$Value)
View(incidencia_2022MF)
library(dplyr)
library(readr)
Incidencia_enfermedades <- read_delim("INPUT/DATA/ECDC_encuesta_AMR_incidencia_enfermedades.csv",
delim = ",", escape_double = FALSE, trim_ws = TRUE)
Incidencia_enfermedades
summary(Incidencia_enfermedades)
#View(Incidencia_enfermedades)
incidencia_2022 <- Incidencia_enfermedades %>%
filter(Time == 2022)
incidencia_2022MF <- incidencia_2022 %>%
filter(Category == 'Male' | Category == 'Female')
View(incidencia_2022MF)
incidencia_2022MF$Value <- as.numeric(incidencia_2022MF$Value)
media_poblacion_genero <- incidencia_2022MF %>%
arrange(Country, Population) %>%  # Ordenar los datos
group_by(Country, Population) %>%
mutate(mean_value = (Value + lead(Value)) / 2) %>%
ungroup()
media_poblacion_genero <- incidencia_2022MF %>%
arrange(RegionName, Population) %>%  # Ordenar los datos
group_by(RegionName, Population) %>%
mutate(mean_value = (Value + lead(Value)) / 2) %>%
ungroup()
View(media_poblacion_genero)
incidencia <- media_poblacion_genero %>%
select(-Unit, -Category, -CategoryIndex, -Value)
# Ver el dataframe
print(incidencia)
View(incidencia)
incidencia <- media_poblacion_genero %>%
select(-Unit, -Category, -CategoryIndex, -Value)%>%
filter(!is.na(mean_value))
# Ver el dataframe
print(incidencia)
View(incidencia)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 3, num_letras)) %>%  # Crear una columna con las primeras letras
group_by(grupo, RegionName) %>%                               # Agrupar por primeras letras y RegionName
mutate(subgrupo = (row_number() - 1) %/% 4 + 1) %>%           # Crear un subgrupo cada 4 filas
summarise(media_mean_value = mean(mean_value, na.rm = TRUE),   # Calcular la media para cada subgrupo
.by = c(grupo, RegionName, subgrupo)) %>%            # Mantener el agrupamiento
ungroup()
library(dplyr)
library(readr)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 3, num_letras)) %>%  # Crear una columna con las primeras letras
group_by(grupo, RegionName) %>%                               # Agrupar por primeras letras y RegionName
mutate(subgrupo = (row_number() - 1) %/% 4 + 1) %>%           # Crear un subgrupo cada 4 filas
summarise(media_mean_value = mean(mean_value, na.rm = TRUE),   # Calcular la media para cada subgrupo
.by = c(grupo, RegionName, subgrupo)) %>%            # Mantener el agrupamiento
ungroup()
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%  # Crear una columna con las primeras letras
group_by(grupo, RegionName) %>%                               # Agrupar por primeras letras y RegionName
mutate(subgrupo = (row_number() - 1) %/% 4 + 1) %>%           # Crear un subgrupo cada 4 filas
summarise(media_mean_value = mean(mean_value, na.rm = TRUE),   # Calcular la media para cada subgrupo
.by = c(grupo, RegionName, subgrupo)) %>%            # Mantener el agrupamiento
ungroup()
View(media_por_bacteria)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%  # Crear una columna con las primeras letras
group_by(grupo, RegionName) %>%                               # Agrupar por primeras letras y RegionName
mutate(subgrupo = (row_number() - 1) %/% 4 + 1) %>%           # Crear un subgrupo cada 4 filas
summarise(media_mean_value = mean(mean_value, na.rm = TRUE)) %>%          # Mantener el agrupamiento
ungroup()
View(media_por_bacteria)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%  # Crear una columna con las primeras letras
group_by(grupo, RegionName) %>%                               # Agrupar por primeras letras y RegionName
mutate(subgrupo = (row_number() - 1) %/% 4 + 1) %>%           # Crear un subgrupo cada 4 filas
#summarise(media_mean_value = mean(mean_value, na.rm = TRUE)) %>%          # Mantener el agrupamiento
ungroup()
View(media_por_bacteria)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%  # Crear una columna con las primeras letras
arrange(grupo, RegionName)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%  # Crear una columna con las primeras letras
arrange(grupo, RegionName)%>%
group_by(grupo, RegionName) %>%                               # Agrupar por primeras letras y RegionName
mutate(subgrupo = (row_number() - 1) %/% 4 + 1) %>%           # Crear un subgrupo cada 4 filas
#summarise(media_mean_value = mean(mean_value, na.rm = TRUE)) %>%          # Mantener el agrupamiento
ungroup()
View(media_por_bacteria)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%  # Crear una columna con las primeras letras
arrange(grupo, RegionName) %>%                # Ordenar por grupo y RegionName
group_by(grupo, RegionName) %>%               # Agrupar por primeras letras y RegionName
mutate(subgrupo = (row_number() - 1) %/% 4 + 1) %>%  # Crear un subgrupo cada 4 filas
summarise(media_mean_value = mean(mean_value, na.rm = TRUE), .groups = 'drop')  # Calcular la media por subgrupo
View(media_por_bacteria)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%             # Crear una columna con las primeras letras
arrange(grupo, RegionName) %>%                           # Ordenar por grupo y RegionName
group_by(grupo, RegionName) %>%                          # Agrupar por primeras letras y RegionName
mutate(subgrupo = (row_number() - 1) %/% 4 + 1,          # Crear un subgrupo cada 4 filas
media_mean_value = mean(mean_value[1:4], na.rm = TRUE)) %>% # Calcular la media por subgrupo
ungroup()
View(media_por_bacteria)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%                # Crear una columna con las primeras letras
arrange(grupo, RegionName) %>%                              # Ordenar por grupo y RegionName
group_by(grupo, RegionName) %>%                             # Agrupar por primeras letras y RegionName
mutate(
media_mean_value = (mean_value + lead(mean_value, 1) + lead(mean_value, 2) + lead(mean_value, 3)) / 4  # Calcular la media de cuatro filas consecutivas
) %>%
ungroup()
View(media_por_bacteria)
inci_bac <- media_por_bacteria %>%
select(-mean_value)%>%
filter(!is.na(media_mean_value))
View(inci_bac)
inci_bac <- media_por_bacteria %>%
select(-mean_value)%>%
filter(!is.na(media_mean_value))%>%
arrange(RegionName)
View(inci_bac)
incidencia <- media_poblacion_genero %>%
select(-Unit, -Category, -CategoryIndex, -Value, -Distribution)%>%
filter(!is.na(mean_value))
# Ver el dataframe
print(incidencia)
View(incidencia)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%                # Crear una columna con las primeras letras
arrange(grupo, RegionName) %>%                              # Ordenar por grupo y RegionName
group_by(grupo, RegionName) %>%                             # Agrupar por primeras letras y RegionName
mutate(
media_mean_value = (mean_value + lead(mean_value, 1) + lead(mean_value, 2) + lead(mean_value, 3)) / 4  # Calcular la media de cuatro filas consecutivas
) %>%
ungroup()
View(media_por_bacteria)
inci_bac <- media_por_bacteria %>%
select(-mean_value)%>%
filter(!is.na(media_mean_value))%>%
arrange(RegionName)
View(inci_bac)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 2, 3)) %>%                # Crear una columna con las primeras letras
arrange(grupo, RegionName) %>%                              # Ordenar por grupo y RegionName
group_by(grupo, RegionName) %>%                             # Agrupar por primeras letras y RegionName
mutate(
media_mean_value = (mean_value + lead(mean_value, 1) + lead(mean_value, 2) + lead(mean_value, 3)) / 4  # Calcular la media de cuatro filas consecutivas
) %>%
ungroup()
View(media_por_bacteria)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 4)) %>%                # Crear una columna con las primeras letras
arrange(grupo, RegionName) %>%                              # Ordenar por grupo y RegionName
group_by(grupo, RegionName) %>%                             # Agrupar por primeras letras y RegionName
mutate(
media_mean_value = (mean_value + lead(mean_value, 1) + lead(mean_value, 2) + lead(mean_value, 3)) / 4  # Calcular la media de cuatro filas consecutivas
) %>%
ungroup()
View(media_por_bacteria)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%                # Crear una columna con las primeras letras
arrange(grupo, RegionName) %>%                              # Ordenar por grupo y RegionName
group_by(grupo, RegionName) %>%                             # Agrupar por grupo y RegionName
summarise(media_mean_value = mean(mean_value, na.rm = TRUE)) %>%  # Calcular la media para cada combinación de grupo y RegionName
ungroup()
View(media_por_bacteria)
library(dplyr)
library(readr)
Incidencia_enfermedades <- read_delim("INPUT/DATA/ECDC_encuesta_AMR_incidencia_enfermedades.csv",
delim = ",", escape_double = FALSE, trim_ws = TRUE)
Incidencia_enfermedades
summary(Incidencia_enfermedades)
#View(Incidencia_enfermedades)
incidencia_2022 <- Incidencia_enfermedades %>%
filter(Time == 2022)
incidencia_2022MF <- incidencia_2022 %>%
filter(Category == 'Male' | Category == 'Female')
View(incidencia_2022MF)
incidencia_2022MF$Value <- as.numeric(incidencia_2022MF$Value)
media_poblacion_genero <- incidencia_2022MF %>%
arrange(RegionName, Population) %>%  # Ordenar los datos
group_by(RegionName, Population) %>%
mutate(mean_value = (Value + lead(Value)) / 2) %>%
ungroup()
incidencia <- media_poblacion_genero %>%
select(-Unit, -Category, -CategoryIndex, -Value, -Distribution)%>%
filter(!is.na(mean_value))
# Ver el dataframe
print(incidencia)
View(incidencia)
media_por_bacteria <- incidencia %>%
mutate(grupo = substr(Population, 1, 3)) %>%                # Crear una columna con las primeras letras
arrange(grupo, RegionName) %>%                              # Ordenar por grupo y RegionName
group_by(grupo, RegionName) %>%                             # Agrupar por grupo y RegionName
summarise(media_mean_value = mean(mean_value, na.rm = TRUE)) %>%  # Calcular la media para cada combinación de grupo y RegionName
ungroup()
View(media_por_bacteria)
View(Incidencia_enfermedades)
